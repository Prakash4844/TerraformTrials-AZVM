# TerraformTrials-AZVM
Tested and tried out Terraform


#### Initialize Terraform

To initialize the Terraform deployment, from the shell prompt, run the following command:

```Bash
terraform init
```

This command downloads the Azure modules necessary to provision and manage Azure resources.
Generate an execution plan

After initialization, create an execution plan by running terraform plan. The command creates an execution plan, but doesn't run it. Instead, it determines what actions are necessary to create the resources defined in your configuration files. The optional -out parameter allows you to specify an output file for the plan, which you can reference during the actual deployment. Using this file ensures that the plan you review matches the exact deployment outcome. Use the following command to generate an execution plan:

```Bash
terraform plan -out <terraform_plan>.tfplan
```
#### Initiate a deployment

When you're ready to apply the execution plan to your Azure environment, run terraform apply, including the name of the file you generated in the previous step. You'll have another chance to review the expected outcome. Terraform will prompt you for confirmation to proceed, although you can eliminate the prompt by adding the -auto-approve switch. Use the following command to initiate the deployment:

```Bash
terraform apply <terraform_plan>.tfplan
```

The Azure VM will shortly begin running, typically within a couple of minutes. The terraform apply command output will include the list of outputs, but terraform will replace the value of tls_private_key with the <sensitive> label:
Output

```
Apply complete! Resources: 12 added, 0 changed, 0 destroyed.
```

Outputs:
```bash
Output

public_ip_address = "74.235.10.136"
resource_group_name = "rg-flexible-shark"
tls_private_key = <sensitive>
```


To use the autogenerated private key for authenticating your SSH connection, store it in a file and then set the file's permissions to ensure it's not accessible by others. To accomplish this, run the following commands:
Output

```bash
terraform output -raw tls_private_key > id_rsa
chmod 400 id_rsa
```

At this point, you'll be able to connect to the Azure VM by running the following command (after replacing the <public_ip_address> placeholder with the IP address you identified in the terraform apply-generated output):
Output

```bash
ssh -i id_rsa azureuser@<public_ip_address>
```